# Логирование

## Log
Для работы с логом используется [Monolog](https://seldaek.github.io/monolog/)

Логирование в файл `SettingsGeneral::LOGS_PATH/main.log`

Минимальный уровень сбора логов `DEBUG`

Для записи в лог используйте код:
```php
/** @var \Monolog\Logger $log */
$log = $this->dic['log'];
$log->warning('Внимание');
$log->info('Уведомление');
```
Полный список всех уровней смотрите в документации [Monolog](https://github.com/Seldaek/monolog/blob/HEAD/doc/01-usage.md#log-levels)

## DataChangeLogs
Логирование изменения данных в БД
```php
use Lemurro\Api\Core\DataChangeLogs\Insert as DataChangeLogInsert;

/** @var DataChangeLogInsert $datachangelog */
$datachangelog = $this->dic['datachangelog'];
$datachangelog->insert($table_name, $action_type, $id, $data = []);
```
- `$table_name` *Обязательно* - Имя таблицы
- `$action_type` *Обязательно* - Тип действия ('insert'|'update'|'delete')
- `$id` *Обязательно* - ИД записи
- `$data` *Не обязательно* - Массив данных, хранится будет в виде json-строки

Пример:
```php
use Lemurro\Api\Core\DataChangeLogs\Insert as DataChangeLogInsert;

/** @var DataChangeLogInsert $datachangelog */
$datachangelog = $this->dic['datachangelog'];
$datachangelog->insert('users', 'save', 3, [
    'field1' => 'value1',
    'field2' => 'value2',
    'field3' => 'value3',
]);
```